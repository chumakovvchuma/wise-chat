(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t,a){e.exports=a(259)},167:function(e,t,a){},168:function(e,t,a){},256:function(e,t){},259:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),s=(a(167),a(57)),i=a(40),c=(a(168),a(18)),m=a(32),u=a(24),d=a(39),p=a(33),g=a(29),h=a(38),E=a(82),f=a(323),b=a(306),w=a(307),v=a(308),S=a(309),y=a(58),k=a.n(y),x=a(310),C=a(329),j=a(311),O=a(304),I=a(301),P=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){console.log(e.target.name,e.target.value);var t=e.target.value,n=e.target.name;a.setState({error:""}),"email"===n?a.validateEmail(t)?a.setState(function(e){return{newUser:Object(E.a)({},e.newUser,Object(c.a)({},n,t)),validEmail:!0}},function(){return console.log(a.state.newUser)}):a.setState({validEmail:!1,error:"Invalid email"}):a.setState(function(e){return{newUser:Object(E.a)({},e.newUser,Object(c.a)({},n,t))}},function(){return console.log(a.state.newUser)})},a.validateEmail=function(e){return!!/^\w+@\w+\.\w+$/.test(e)},a.onChangeUsername=function(e){console.log(e.target.name,e.target.value);var t=e.target.value,n=e.target.name;a.setState({error:""}),a.setState(function(e){return{newUser:Object(E.a)({},e.newUser,Object(c.a)({},n,t))}},function(){return console.log(a.state.newUser)}),k.a.get("https://wise-chat.herokuapp.com/users/".concat(t)).then(function(e){console.log(e),"User exists"===e.data.message?(a.setState({usernameAvailable:!1}),console.log("User name already taken")):(a.setState({usernameAvailable:!0}),console.log("Available"))}).catch(function(e){console.log(e)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.newUser.username,n=a.state.newUser.name,r=a.state.newUser.email,l=a.state.newUser.password,o={username:t,name:n,uid:r,password:l};console.log(t,n,r,l,a.state.usernameAvailable,a.state.validEmail),t&&n&&r&&l?a.state.usernameAvailable&&a.state.validEmail?k.a.post("https://wise-chat.herokuapp.com/signUp",o).then(function(e){console.log(e),console.log(e.data),a.props.changeStateHandler(),a.setState({error:""})}).catch(function(e){a.setState({error:"Invalid entries"}),console.log(e)}):a.state.usernameAvailable?a.setState({error:"Invalid Email"}):a.setState({error:"Username already taken"}):(a.setState({error:"Fields cannot be empty"}),console.log("Fields cannot be empty"))},a.handleLogin=function(){a.props.changeStateHandler()},a.handleClickShowPassword=function(){a.setState(function(e){return{showPassword:!e.showPassword}})},a.changeStateHandler=function(){a.setState({signup:!1})},a.state={newUser:{username:"",name:"",email:"",password:""},usernameAvailable:!0,validEmail:!1,error:""},a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(C.a,null),r.a.createElement("div",{style:{marginTop:50}},r.a.createElement("h1",{className:"font"},"Sign up"),this.state.error&&r.a.createElement("div",{style:{color:"red",textAlign:"center"}},this.state.error),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12,sm:12},r.a.createElement(f.a,{id:"input",type:"text",variant:"outlined",name:"username",label:"Username",fullWidth:!0,required:!0,autoFocus:!0,margin:"normal",onChange:function(t){e.onChangeUsername(t)},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"Valid name"},this.state.newUser.username?this.state.usernameAvailable?r.a.createElement("i",{className:"material-icons",style:{fontSize:"30px",marginTop:"auto",color:"green"}},"check"):r.a.createElement("i",{className:"material-icons",style:{fontSize:"30px",marginTop:"auto",color:"red"}},"close"):r.a.createElement("i",null)))}})),r.a.createElement(O.a,{item:!0,xs:12,sm:12},r.a.createElement(f.a,{id:"input",type:"text",variant:"outlined",name:"name",label:"Name",fullWidth:!0,required:!0,margin:"normal",onChange:function(t){e.onChange(t)}})),r.a.createElement(O.a,{item:!0,xs:12,sm:12},r.a.createElement(f.a,{id:"input",type:"email",variant:"outlined",name:"email",label:"Email",fullWidth:!0,required:!0,margin:"normal",onChange:function(t){e.onChange(t)},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"Valid email"},this.state.newUser.email?this.state.validEmail?r.a.createElement("i",{className:"material-icons",style:{fontSize:"30px",marginTop:"auto",color:"green"}},"check"):r.a.createElement("i",{className:"material-icons",style:{fontSize:"30px",marginTop:"auto",color:"red"}},"close"):r.a.createElement("i",null)))}})),r.a.createElement(O.a,{item:!0,xs:12,sm:12},r.a.createElement(f.a,{id:"filled-adornment-password",name:"password",label:"Password",fullWidth:!0,required:!0,margin:"normal",type:this.state.showPassword?"text":"password",variant:"outlined",onChange:function(t){e.onChange(t)},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?r.a.createElement(v.a,null):r.a.createElement(S.a,null)))}}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.handleSubmit},"Sign Up"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O.a,{container:!0,justify:"flex-end"},r.a.createElement(O.a,{item:!0},r.a.createElement(j.a,{href:"#",variant:"body2",onClick:this.handleLogin},"Already have an account? Log in"))))))}}]),t}(r.a.Component),U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState({error:""}),a.setState(Object(c.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.email,n=a.state.password;console.log(t,n),a.validateUser(t,n)},a.handleClickShowPassword=function(){a.setState(function(e){return{showPassword:!e.showPassword}})},a.validateUser=function(e,t){console.log(e,t);var n={uid:e,password:t};e&&t?k.a.post("https://wise-chat.herokuapp.com/signIn",n).then(function(e){console.log(e),console.log(e.data),localStorage.setItem("username",e.data.token.username),localStorage.setItem("uid",e.data.token.uid),localStorage.setItem("name",e.data.token.name),console.log("Validating",localStorage.getItem("username")),a.setState({error:""})}).catch(function(e){a.setState({error:"Invalid credentials"}),console.log(e)}):(a.setState({error:"Fields cannot be empty"}),console.log("Empty not allowed"))},a.handleSignup=function(){a.setState({signup:!0})},a.changeStateHandler=function(){a.setState({error:""}),a.setState({signup:!1})},a.state={signup:!1,email:"",password:"",error:""},a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log("login page"),localStorage.getItem("username")?r.a.createElement("div",null,r.a.createElement(i.a,{to:"/"})):this.state.signup?r.a.createElement(P,{changeStateHandler:this.changeStateHandler}):r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(C.a,null),r.a.createElement("div",{style:{marginTop:50}},r.a.createElement("h1",{className:"font"},"Let's ChitChat"),this.state.error&&r.a.createElement("div",{style:{color:"red",textAlign:"center"}},this.state.error),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(f.a,{id:"input-with-icon-adornment",type:"text",variant:"outlined",name:"email",label:"Email",fullWidth:!0,required:!0,autoFocus:!0,margin:"normal",onChange:function(t){e.onChange(t)}}),r.a.createElement(f.a,{id:"filled-adornment-password",name:"password",label:"Password",fullWidth:!0,required:!0,margin:"normal",type:this.state.showPassword?"text":"password",variant:"outlined",onChange:function(t){e.onChange(t)},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(w.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?r.a.createElement(v.a,null):r.a.createElement(S.a,null)))}}),r.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.handleSubmit},"LogIn"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O.a,{container:!0,justify:"flex-end"},r.a.createElement("div",null,r.a.createElement(O.a,{item:!0},r.a.createElement(j.a,{href:"#",variant:"body2",onClick:this.handleSignup},"Don't have an account? Sign Up")))))))}}]),t}(n.Component),N=a(320),A=a(315),W=a(326),D=a(325),T=a(305),B=a(316),L=a(317),R=a(319),_=a(152),H=a.n(_),M=a(321),F=a(52),z=a(260),q=a(327),G=a(153),J=a.n(G),V=a(318),$=a(5),K=(a(198),a(154)),Q=a(151),X=a.n(Q),Y=a(312),Z=a(313),ee=a(314),te=function(e){var t=[],a=[];return e.messages&&(t=e.messages.filter(function(t){if(t.username2===e.username2&&t.username===localStorage.getItem("username")||t.username===e.username2&&t.username2===localStorage.getItem("username"))return t}),console.log("personalMessages",t),a=e.messages.filter(function(e){if(void 0===e.username2)return e}),console.log("generalMessages",a)),e.personalChatRoom&&void 0!==t[0]?r.a.createElement("div",null,t.map(function(e){return r.a.createElement(z.a,{style:{padding:"3px",marginLeft:e.username===localStorage.getItem("username")?"auto":"",borderRadius:"20px",width:"fit-content"}},r.a.createElement("div",{style:{padding:"3px",margin:3,textAlign:e.username===localStorage.getItem("username")?"right":"left"}},r.a.createElement("span",{style:{fontFamily:"Josefin Sans",color:"crimson",fontWeight:"bold"}},e.username),r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:"18px",wordBreak:"break-all"}},e.message)," ",r.a.createElement("span",{style:{color:"crimson"}},"positive"===e.status?r.a.createElement(Y.a,null):"negative"===e.status?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null))))})):e.personalChatRoom||void 0===a[0]?r.a.createElement("div",null,"Let's Chitchat !!"):r.a.createElement("div",null,a.map(function(e){return r.a.createElement(z.a,{style:{padding:"3px",marginLeft:e.username===localStorage.getItem("username")?"auto":"",borderRadius:"20px",width:"fit-content"}},r.a.createElement("div",{style:{padding:"3px",margin:3,textAlign:e.username===localStorage.getItem("username")?"right":"left"}},r.a.createElement("span",{style:{fontFamily:"Josefin Sans",color:"dodgerblue",fontWeight:"bold"}},e.username),r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:"18px",wordBreak:"break-all"}},e.message)," ",r.a.createElement("span",{style:{color:"dodgerblue"}},"positive"===e.status?r.a.createElement(Y.a,null):"negative"===e.status?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null))))}))},ae=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState({message:e.target.value})},a.handleSend=function(e){e.preventDefault(),a.state.personalChatRoom?a.state.socket.emit("personalMessage",{username2:a.state.username2,username:localStorage.getItem("username"),uid:localStorage.getItem("uid"),message:a.state.message}):a.state.socket.emit("message",{username:localStorage.getItem("username"),uid:localStorage.getItem("uid"),message:a.state.message}),a.setState({message:""}),a.state.showEmojiPicker&&a.setState({showEmojiPicker:!a.state.showEmojiPicker})},a.handleDrawerToggle=function(){a.setState({mobileOpen:!a.state.mobileOpen})},a.changeLogoutStateHandler=function(){localStorage.removeItem("username"),localStorage.removeItem("uid"),localStorage.removeItem("name"),a.state.socket.emit("disconnect"),a.state.socket.disconnect(),a.setState({loggedin:!1})},a.onClickHandler=function(e){a.setState({username2:e,personalChatRoom:!0}),a.state.mobileOpen&&a.setState({mobileOpen:!a.state.mobileOpen})},a.addEmoji=function(e){var t=e.native;a.setState({message:a.state.message+t})},a.handleMart=function(){a.setState({showEmojiPicker:!a.state.showEmojiPicker})},a.state={mobileOpen:!1,loggedin:!0,response:[],message:"",messages:[],socket:null,username2:"",personalChatRoom:!1,showEmojiPicker:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=X()("https://wise-chat.herokuapp.com/",{query:"username="+localStorage.getItem("username")+"&uid="+localStorage.getItem("uid")});console.log("socket",t),t.on("updateUsersList",function(t){e.setState({response:t})}),t.on("message",function(t){e.setState({messages:e.state.messages.concat(t)})}),t.on("personalMessage",function(t){e.setState({messages:e.state.messages.concat(t)})}),this.setState({socket:t})}},{key:"componentDidUpdate",value:function(){window.scrollTo(0,document.body.scrollHeight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.container,l=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar}),r.a.createElement("div",{style:{fontFamily:"Josefin Sans",color:"navy",fontWeight:"bold",fontSize:"20px"}},"Hello ",localStorage.getItem("username")),r.a.createElement(A.a,null),r.a.createElement(T.a,null,r.a.createElement(B.a,{button:!0,selected:""===this.state.username2,onClick:function(){e.setState({personalChatRoom:!1,username2:""}),e.state.mobileOpen&&e.setState({mobileOpen:!e.state.mobileOpen})}},r.a.createElement(L.a,null,r.a.createElement(V.a,null,r.a.createElement("i",{className:"material-icons",style:{color:"darkblue"}},"group"))),r.a.createElement(R.a,{primary:"ChatRoom"})),this.state.response.map(function(t){if(t!==localStorage.getItem("username"))return r.a.createElement(B.a,{button:!0,selected:e.state.username2===t,key:t,value:t,onClick:function(){return e.onClickHandler(t)}},r.a.createElement(L.a,null,r.a.createElement(V.a,null,r.a.createElement("i",{className:"material-icons",style:{color:"darkblue"}},"person"))),r.a.createElement(R.a,{primary:t}))})),r.a.createElement(A.a,null));return this.state.loggedin?r.a.createElement("div",{className:a.root},r.a.createElement(C.a,null),r.a.createElement(N.a,{position:"fixed",className:a.appBar,color:"secondary"},r.a.createElement(M.a,null,r.a.createElement(w.a,{color:"inherit","aria-label":"Open drawer",edge:"start",onClick:this.handleDrawerToggle,className:a.menuButton},r.a.createElement(H.a,null)),r.a.createElement(F.a,{variant:"h6",noWrap:!0,style:{flexGrow:1,fontFamily:"Josefin Sans",fontSize:"24px",fontWeight:"bold"}},this.state.username2?this.state.username2:"Group"),r.a.createElement(x.a,{color:"inherit",onClick:this.changeLogoutStateHandler},"Logout"))),r.a.createElement("nav",{className:a.drawer,"aria-label":"Mailbox folders"},r.a.createElement(D.a,{smUp:!0,implementation:"css"},r.a.createElement(W.a,{container:n,variant:"temporary",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},l)),r.a.createElement(D.a,{xsDown:!0,implementation:"css"},r.a.createElement(W.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},l))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement("div",{className:this.state.showEmojiPicker?a.chatroom_new:a.chatroom},r.a.createElement(te,{personalChatRoom:this.state.personalChatRoom,username2:this.state.username2,messages:this.state.messages}),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),r.a.createElement("div",{className:a.root_input},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12,sm:12},r.a.createElement("form",{onSubmit:this.handleSend},r.a.createElement(z.a,{className:a.root_input_inner},r.a.createElement(w.a,{className:a.iconButton,"aria-label":"Menu"},r.a.createElement("i",{className:"material-icons",onClick:this.handleMart},"tag_faces")),r.a.createElement(q.a,{className:a.input,placeholder:"Type your message...",inputProps:{"aria-label":"Type message"},onChange:this.handleChange,value:this.state.message}),r.a.createElement(A.a,{className:a.divider}),r.a.createElement(w.a,{color:"primary",className:a.iconButton,"aria-label":"Directions",onClick:this.handleSend},r.a.createElement(J.a,null))))),r.a.createElement(O.a,{item:!0,xs:12,sm:12},this.state.showEmojiPicker?r.a.createElement(K.a,{set:"emojione",search:!1,onSelect:this.addEmoji,className:a.root_input_emoji,style:{width:"100%",height:"250px",overflow:"hidden"}}):null))))):r.a.createElement("div",null,r.a.createElement(i.a,{to:"/login"}))}}]),t}(n.Component),ne=Object($.a)(function(e){return{root:{display:"flex"},drawer:Object(c.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0,backgroundColor:"aliceblue"}),appBar:Object(c.a)({flexGrow:1,marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(c.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},root_input:Object(c.a)({flexGrow:1,padding:"2px 4px",display:"flex",flexDirection:"row",position:"fixed",bottom:"10px",right:"2px"},e.breakpoints.up("sm"),{left:"".concat(242,"px")}),root_input_inner:{flexGrow:1,padding:"2px 2px",display:"flex",flexDirection:"row",borderRadius:"25px",width:"auto",margin:"20px"},root_input_emoji:Object(c.a)({flexGrow:1,position:"fixed",top:"500px",background:"black",backgroundColor:"black"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(242,"px)")}),input:{display:"flex",flexDirection:"row",width:"80%"},iconButton:{padding:10},divider:{width:1,height:28,margin:4},chatroom:{paddingBottom:"100px"},chatroom_new:{paddingBottom:"300px"},emojiPicker:{width:"100%"}}})(ae),re=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return localStorage.getItem("username")?r.a.createElement("div",null,r.a.createElement(ne,null)):r.a.createElement("div",null,r.a.createElement(i.a,{to:"/login"}))}}]),t}(n.Component);var le=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(re,null)}}),r.a.createElement(i.b,{path:"/login",render:function(e){return r.a.createElement(U,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[162,1,2]]]);
//# sourceMappingURL=main.6986de60.chunk.js.map